@model IEnumerable<FSWDFinalProject.DATA.EF.Location>

@{
    ViewBag.Title = "Locations";
}

<section id="resent-job-post" class="background-color-white">
    <div class="vertical-space-85"></div>
    <div class="container text-center">
        <h3 class="text-center">@ViewBag.Title</h3>
        <p>
            @Html.ActionLink("Add a Location", "Create")
        </p>
        <div class="vertical-space-30"></div>
        <div class="vertical-space-60"></div>
        <div class="detail">
            <div class="media display-inline text-align-center">
                <table class="table">
                    <tr>
                        <th>
                            @Html.DisplayNameFor(model => model.StoreNumber)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.City)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.State)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.UserDetail.FullName)
                        </th>
                        <th></th>
                    </tr>

                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>
                                @*@Html.ActionLink("Details", "Details", new { id = item.LocationId })*@
                                <!--Made Store Number a link to Details for that Location-->
                                @Html.ActionLink(item.StoreNumber, "Details", new { id = item.StoreNumber })
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.City)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.State)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.UserDetail.FullName)
                            </td>
                            <td>
                                @Html.ActionLink("Edit", "Edit", new { id = item.LocationId }) |
                                @Ajax.ActionLink("Delete", "AjaxDelete", "Locations", new { id = item.LocationId},
                                                        new AjaxOptions {
                                                            HttpMethod = "POST",
                                                            Confirm = $"Are you sure you want to delete {item.StoreNumber} from the authors table?",
                                                            OnSuccess = "deleteConfirmed",
                                                            OnFailure = "deleteFailed"
                                                        })
                            </td>
                        </tr>
                    }

                </table>
            </div>
        </div>
    </div>
</section>

